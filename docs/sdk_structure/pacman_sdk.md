# 热身赛SDK引导
本文档是吃豆人和幽灵的SDK使用说明

## 代码结构

SDK由GYM环境类、AI函数和游戏控制器组成。

### GYM环境类
#### 游戏的基本信息
本游戏是吃豆人的魔改版本，共有三个关卡。每个关卡的地图大小分别为 38×38、29×29 和 18×18。吃豆人在每一关中可行走的步数是有限的，如果达到最大步数，将会强制进入下一关。

地图内有墙壁和空地，空地上随机分布着不同种类的豆子。吃豆人在躲避幽灵追击的同时，需要尽可能在有限的步数内吃掉更多的豆子，以获得更高的分数，而幽灵则要尽可能的抓住吃豆人。

场景内共有六种豆子：

普通豆子：每吃一个加 1 分。
奖励豆子：每吃一个加 2 分。
×2 豆子：吃掉后，吃豆人在接下来的 10 步内所得分数加倍。
加速豆子：吃掉后，吃豆人在接下来的 10 步内速度翻倍，即每回合走 2 格，但不支持自动拐弯。
磁铁豆子：吃掉后，吃豆人在接下来的 10 步内可以吸取当前位置周围 3×3 范围内的所有豆子（在第一关地图较大，吃豆人可以吸取周围 5×5 范围内的所有豆子）。
护盾豆子：吃掉后，吃豆人在接下来的 10 步内可以免疫一次幽灵的抓捕。
在第一关和第二关中，地图中间区域存在通往下一关的传送门。当地图内剩余豆子不足 1/3 时，传送门会开启，吃豆人可以直接进入下一关。

额外加分：如果吃豆人在没有被幽灵抓住的情况下，一命连续获得 100 分，则会获得额外的加分。

幽灵每抓住一次吃豆人，幽灵方即获得100分的加分。

GYM环境类维护了游戏局面的全量信息。该类提供如下接口：
#### reset
reset 函数在每关开始时由 judger 调用。玩家将进入一个新的地图，吃豆人和三个幽灵会随机生成在地图的四个角落。该函数会返回一个包含新地图信息的 JSON 字符串。随后，judger 会将这个 JSON 字符串编码并发送给 AI。
#### ai_reset
此函数由 AI 调用，用于解码 judger 发送的信息并初始化本地地图。
#### render
此函数可在本地终端生成地图进行对战，供选手调试使用。
#### step

### Controller

#### 初始化
初始化时逻辑通过judger向0号玩家发送字符串"0"，向1号玩家发送字符串"1"，0号玩家先发送操作消息，1号玩家后发送操作消息。

#### run
run函数首先判断是否进入新的level，若进入新的level则读取judger传来的初始化信息并实例化整局游戏唯一的环境实例。

若当前玩家为<b>0号玩家</b>，则先调用传入的ai函数，并将ai函数返回的操作序号传给judger
```py
pacman_op(self.env,ai) # 当前玩家为吃豆人，则ai应该返回一个含1个元素的数组
```
或
```py
ghosts_op(self.env,ai) # 当前玩家为幽灵，则ai返回一个含3个元素的数组
```
然后读取对方已经操作的消息
```py
get_info = input() # 并不能读取到对方发送的操作内容，只是标记对方已经发送操作
```
最后读取judger传来的幽灵和吃豆人的操作信息，更新整局游戏唯一的环境实例。


若当前玩家为<b>1号玩家</b>，则先读取对方已经操作的消息
```py
get_info = input() # 并不能读取到对方发送的操作内容，只是标记对方已经发送操作
```
然后调用传入的ai函数，并将ai函数返回的操作序号传给judger
```py
pacman_op(self.env,ai) # 当前玩家为吃豆人，则ai应该返回一个含1个元素的数组
```
或
```py
ghosts_op(self.env,ai) # 当前玩家为幽灵，则ai返回一个含3个元素的数组
```

最后读取judger传来的幽灵和吃豆人的操作信息，更新整局游戏唯一的环境实例。

### AI函数
一个输入为GYM环境类实例，输出为操作序号的函数。**注意，请不要在函数中直接对传入的环境实例作修改。请使用deepcopy复制**