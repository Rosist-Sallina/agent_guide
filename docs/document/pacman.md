# Rollman

## 一、游戏背景

- 在这款游戏中，你将扮演一名北京某大学的学生，身处于一个充满挑战和机遇的学术迷宫。你的目标是通过不断闯关，收集象征知识和智慧的金币，以提升自己的能力。每一枚金币代表着你对世界的理解和自我成长的一步。

- 然而，前方的路并不平坦。三位幽灵——课业、科研和社工——正紧追不放。课业幽灵随时准备考核你的学术能力，科研幽灵则悄然在你周围游荡，时刻考验你在实验室和研究中的坚持，而社工幽灵则是各种社会活动和人际关系的代名词，时刻挑战你平衡学习与生活的能力。
  为了逃脱这些幽灵的追捕，你必须灵活躲避，快速思考，尽可能多地收集知识金币，积累经验，不断提升自己的能力，以突破重重难关。每一次突破，都意味着你离成为更加优秀的自己更近一步。

- 在这个充满挑战的世界中，你不仅是在与幽灵对抗，更是在与时间、压力和自我成长进行一场博弈。

- 在每个关卡中，你将掌握自己命运的钥匙。随着关卡的进行，经过一段时间后，通往下一关的传送之门将悄然开启。在这个时刻，你将面临抉择：是选择立即穿越传送门，迈向下一关的挑战，还是继续停留在当前关卡，收集剩余的知识金币？这一决定关乎你的成长与安全。你必须在获取更多知识与保障自身安全之间做出智慧的权衡。每一次选择，都将影响你最终的冒险进程。

## 二、场景设置

每个关卡的地图大小分别为 38×38、29×29 和 18×18，地图以左下角为(0,0)。你在每一关中可行走的步数是有限的，三个关卡的最大步数分别为 500、400、300，如果达到最大步数，将会强制进入下一关。

你可以拾取护盾，护盾可以抵挡一次幽灵的抓捕。但是如果被抓捕时没有护盾则会被幽灵吃掉，然后重生在**曼哈顿距离**意义上距离幽灵较远的随机角落。与此同时，你的所有技能都会清空。你没有命数限制，但是每次被吃掉都会有一定的分数惩罚。

场景内共有六种金币，其中除普通的知识金币外其余的特殊道具数量较少：

1. 知识金币：每获得一个加 1 分。

2. 双倍荣耀币：价值双倍的金币，让你在知识的世界中快速积累更多的财富，一次成功收集，便能突破多个难关。

3. 疾风之翼：拥有它，在接下来的 10 步中，你将如风般迅速，一步并作两步，疾速穿梭在学术迷宫中，迅捷躲避幽灵的追击。

4. 智引磁石：拥有它，在接下来的 10 步中，你可以吸引到周围 3\*3 的所有金币与特殊道具，让你轻松收集，仿佛一块智慧的磁铁。

5. 护学之盾：在命悬一线时，护学之盾将为你挡住幽灵的追捕，保护你在最危急的时刻安全脱离困境。

6. 智慧圣典：一本神奇的书籍，开启智慧的传承，助你在接下来的 10 步中事半功倍，快速克服课业、科研与社交的困扰。

7. 在第一关和第二关中，地图中间区域存在通往下一关的传送门。当你在第一关行走超过 60 步以及在第二关行走超过 50 步时，传送门会开启，你可以通过进入传送门来直接进入下一关的挑战。<b>但请注意，当幽灵站在传送门上的时候，卷王并不能通过传送门进入下一关。</b>

## 三、加分规则

### 卷王

如果卷王在没有被幽灵抓住的情况下，一命连续获得 100 分，则会获得额外的 50 分加分。

如果卷王把本关地图中所有的豆子全吃完了，会获得 50 分的加分。

如果卷王被幽灵吃掉了一次，会被减掉 60 分。

如果卷王提前通关（包括传送门传送或者吃掉所有豆子），会获得大小为
$\lfloor(MaxRound(level) - CurrentRound) \times 0.43\rfloor$
的时间因子加分。

### 幽灵

幽灵抓住卷王，则抓住卷王的幽灵获得 50 分的加分。

幽灵摧毁了卷王的护盾，则摧毁卷王护盾的幽灵获得 10 分的加分。

幽灵每吃掉5次卷王时（不包含摧毁护盾），每个幽灵都将获得20分的加分。

如果卷王没有在本关结束前吃掉本关所有的豆子，那么每个幽灵都将获得 25 分的加分。

### 幽灵抓住卷王的判定

每一轮中判断幽灵走过的路径和卷王走过的路径（不包含起点，包含终点），若两者的路径有重合，则判断为幽灵和卷王在此轮相遇，即幽灵抓住了卷王。

## 四、时间空间限制
AI初始化限制运行时间2s，操作限制运行时间1s，空间512MB，超过限制直接判负。

## 五、AI SDK

吃豆人SDK仓库：[https://github.com/PacMan-Logic/PacmanSDK-python](https://github.com/PacMan-Logic/PacmanSDK-python)

幽灵SDK仓库：[https://github.com/PacMan-Logic/GhostsSDK-python](https://github.com/PacMan-Logic/GhostsSDK-python)

逻辑仓库：[https://github.com/PacMan-Logic/PacmanLogic](https://github.com/PacMan-Logic/PacmanLogic)

## 六、通信协议及游戏流程
### 通信流程
- 逻辑给双方发送初始化信息
- 逻辑接收到先手玩家操作
- 逻辑接收到后手玩家操作
- 结算双方玩家操作并更新游戏状态
- 如果中途游戏结束，则对局直接终止

### 操作码
|操作名称|操作码|
|----|---|
|停留在原地|0|
|向上移动|1|
|向左移动|2|
|向下移动|3|
|向右运动|4|

### 初始化信息及回放文件格式
见通信文档